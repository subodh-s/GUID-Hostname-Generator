
# GUID + Hostname Key Generator

## Table of Contents
1. [Introduction](#introduction)
2. [Features](#features)
3. [Requirements](#requirements)
4. [Implementation](#implementation)
5. [Installation](#installation)
6. [Usage](#usage)
7. [Testing](#testing)
8. [Contributing](#contributing)
9. [License](#license)
10. [Questions or Feedback](#questions-or-feedback)

---

## Introduction
This repository contains a **Java** implementation of a **GUID + Hostname-based Key Generator**, designed to produce **globally unique identifiers** in distributed environments (e.g., multiple EC2 instances). Each generated key includes a **UUID** plus the **hostname** of the instance, ensuring uniqueness even at high throughput.

---

## Features
- **Simplicity**: Minimal setup and easy integration into any Java application.
- **Global Uniqueness**: Uses Java’s built-in `UUID.randomUUID()` plus the machine’s hostname.
- **Lightweight**: No extra dependencies beyond the Java Standard Library.
- **Quick Debugging**: Hostname embedded in the key makes it easier to trace records to a specific instance.

---

## Requirements
- **Java 8** or higher (tested with Java 11 and above).
- (Optional) **Maven** for building and testing.

---

## Implementation

Below are the main source files included in this repository: a generator class and a test class.

### `GuidHostnameGenerator.java`

```java
package com.example.guidhostname;

import java.net.InetAddress;
import java.net.UnknownHostException;
import java.util.UUID;

/**
 * Generates a unique key by combining a UUID and the hostname
 * of the machine on which it's running.
 */
public class GuidHostnameGenerator {

    /**
     * Generate a unique key (UUID + hostname).
     *
     * @return A string in the format: <UUID>-<hostname>
     */
    public static String generateKey() {
        String uuid = UUID.randomUUID().toString();
        String hostname = getHostName();
        return uuid + "-" + hostname;
    }

    /**
     * Retrieves the hostname of the current machine.
     *
     * @return Hostname if available, otherwise "unknown-host".
     */
    private static String getHostName() {
        try {
            return InetAddress.getLocalHost().getHostName();
        } catch (UnknownHostException e) {
            return "unknown-host";
        }
    }
}
```

### `GuidHostnameGeneratorTest.java`

```java
package com.example.guidhostname;

import org.junit.jupiter.api.Test;

import java.util.Collections;
import java.util.HashSet;
import java.util.Set;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

import static org.junit.jupiter.api.Assertions.*;

/**
 * Test class to verify uniqueness of keys generated by GuidHostnameGenerator
 * under high-throughput conditions.
 */
class GuidHostnameGeneratorTest {

    @Test
    void testGenerateKeysForHighThroughput() throws InterruptedException {
        // Number of concurrent requests to simulate
        final int numberOfRequests = 10_000;

        // Thread-safe Set to store generated keys
        Set<String> generatedKeys = Collections.synchronizedSet(new HashSet<>());

        // Create a thread pool (e.g., 10 threads)
        ExecutorService executorService = Executors.newFixedThreadPool(10);

        // Submit tasks to generate keys in parallel
        for (int i = 0; i < numberOfRequests; i++) {
            executorService.submit(() -> {
                String key = GuidHostnameGenerator.generateKey();

                // Check for duplicates; if found, fail the test immediately
                synchronized (generatedKeys) {
                    assertFalse(generatedKeys.contains(key), "Duplicate key found: " + key);
                    generatedKeys.add(key);
                }
            });
        }

        // Shut down the executor and wait for all tasks to finish
        executorService.shutdown();
        boolean finished = executorService.awaitTermination(10, TimeUnit.SECONDS);

        // Ensure all tasks completed successfully
        assertTrue(finished, "Not all key generation tasks completed in time");

        // Verify the total number of unique keys generated matches the number of requests
        assertEquals(numberOfRequests, generatedKeys.size(),
                "Number of generated keys does not match the number of requests");
    }
}
```

---

## Installation

### 1. Clone or Download
Clone the repository to your local machine:
```bash
git clone https://github.com/your-username/guid-hostname-generator.git
cd guid-hostname-generator
```

### 2. Build with Maven
If you want to build and run tests locally, use Maven:
```bash
mvn clean install
```
This command will:
- **Clean**: Remove any previously compiled files.
- **Compile**: Build the source code.
- **Test**: Run the included unit tests to verify correctness.
- **Package**: Create a `.jar` file for the project.
- **Install**: Install the `.jar` file into your local Maven repository.

---

## Usage

### Option A: As a Library
1. Build the project using Maven (`mvn clean install`).
2. Add the following dependency to your `pom.xml`:
   ```xml
   <dependency>
       <groupId>com.example</groupId>
       <artifactId>guid-hostname-generator</artifactId>
       <version>1.0.0</version>
   </dependency>
   ```

### Option B: Copy Source Files Directly
If you prefer not to use Maven:
1. Copy the `GuidHostnameGenerator.java` file from the `src/main/java/com/example/guidhostname/` directory.
2. Paste it into your project structure under the appropriate package.

---

### Generating a Key

```java
import com.example.guidhostname.GuidHostnameGenerator;

public class Main {
    public static void main(String[] args) {
        String uniqueKey = GuidHostnameGenerator.generateKey();
        System.out.println("Generated Key: " + uniqueKey);
    }
}
```

**Output Example**
```
Generated Key: f47ac10b-58cc-4372-a567-0e02b2c3d479-ec2-54-165-23-112
```

---

## Testing

This repository includes a JUnit test (`GuidHostnameGeneratorTest.java`) to ensure uniqueness under high concurrency (10,000 requests in parallel).

1. **Run Tests**:
   ```bash
   mvn test
   ```
2. **What the Tests Do**:
    - **High Throughput**: Simulates 10,000+ parallel requests.
    - **Uniqueness Check**: Ensures no two requests produce the same key.

---

## Contributing

We welcome contributions! Here’s how you can help:

1. **Fork** this repository.
2. Create a **new branch** (`git checkout -b feature-xyz`).
3. Commit your changes (`git commit -m "Add new feature"`).
4. Push to your branch (`git push origin feature-xyz`).
5. Submit a **Pull Request**.

We’ll review your changes and merge them if they fit well with the project goals.

---

## License

[MIT License](LICENSE)  
Feel free to use, modify, or distribute this code in your own projects, as long as you adhere to the license terms.

---

## Questions or Feedback?

- Open an [issue](../../issues) on GitHub if you find a bug or have a feature request.
- Feel free to reach out or open a Pull Request with improvements!

Happy coding!
